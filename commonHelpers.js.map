{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport { inputSearch, page, limit, input } from '../main';\nimport axios from \"axios\";\n\nexport async function fetchPhotoFromPixabay() {\n    let inputValueForForm;\n    if (page === 1) {\n        inputValueForForm = inputSearch.value.trim().split(' ').join('+');  \n    } else {\n        inputValueForForm = input.trim().split(' ').join('+');\n    }\n    const searchParams = new URLSearchParams({\n        key: \"42633759-4a44573e34755b4488adb4c1b\",\n        q: [inputValueForForm],\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: [page], \n        per_page: [limit]\n    });\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n        return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { listOfPhotos, lightbox } from '../main';\n\n\nexport function renderPhotos(arr) { \n    if (arr.length == 0) {\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    } else {\n            \n        const markup = arr.map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => {\n            return `<li class=\"photos-list-item\">\n            <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n            <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n            </a>\n            <ul class=\"photo-information-container\">\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n            </ul>\n            </li>`;\n        })\n            .join(\"\");\n        listOfPhotos.insertAdjacentHTML(\"beforeend\", markup);\n        \n        lightbox.refresh();\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchPhotoFromPixabay } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\n\n\nconst form = document.querySelector('.search-form');\nexport const inputSearch = form.elements.search;\nconst nextPageBtn = document.querySelector('.next-page-btn');\nhideElement(nextPageBtn);\nexport const listOfPhotos = document.querySelector('.gallery');\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\nconst preloader = document.querySelector('.loader');\nhideElement(preloader);\nexport let page = 1;\nexport let limit = 15;\nlet totalPages = Number;\nexport let input = '';\n\nwindow.onload = handleLoad;\n\nform.addEventListener('submit', handleSendForm);\nnextPageBtn.addEventListener('click', handleNextPage);\n\nasync function handleSendForm(evt) {\n    evt.preventDefault();\n    listOfPhotos.innerHTML = \"\";\n    hideElement(nextPageBtn);\n    const newInput = evt.target.elements.search.value.trim();\n    if (newInput !== '' && newInput !== input) {\n        page = 1;\n        input = newInput;\n        await handleSubmit();\n    } else {\n        return iziToast.show({\n            message: 'Please complete the field!',\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    }\n}\n\nasync function handleSubmit() {\n    try {\n        showElement(preloader);\n        const photoFromPixabay = await fetchPhotoFromPixabay();\n        renderPhotos(photoFromPixabay.hits);\n        const itemOfList = listOfPhotos.querySelector('.photos-list-item');\n        const domRect = itemOfList.getBoundingClientRect();\n        window.scrollBy({\n            top: domRect.height * 2,\n            behavior: \"smooth\",\n        });\n        totalPages = Math.ceil(photoFromPixabay.totalHits / limit);\n        showElement(nextPageBtn);\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            message: 'Sorry, an error occurred while loading. Please try again!',\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    } finally {\n        hideElement(preloader);\n        handleLoad();\n        form.reset();\n    }\n}\n\nasync function handleNextPage() {\n    if (page > totalPages) {\n        hideElement(nextPageBtn);\n        return iziToast.error({\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: \"topRight\",\n            message: \"We're sorry, there are no more posts to load\"\n        });\n    } else {\n        ++page;\n        await handleSubmit();\n    }\n}\n\nfunction showElement(element) {\n    element.classList.toggle('hidden');\n    element.style.display = 'flex';\n};\n\nfunction hideElement(element) {\n    element.classList.toggle('hidden');\n    element.style.display = 'none';\n};\n\nfunction handleLoad() {\n    document.body.classList.add('loaded');\n    document.body.classList.remove('loaded_hiding');\n};\n\n"],"names":["fetchPhotoFromPixabay","inputValueForForm","page","inputSearch","input","searchParams","limit","axios","renderPhotos","arr","iziToast","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","listOfPhotos","lightbox","form","nextPageBtn","hideElement","SimpleLightbox","preloader","totalPages","handleLoad","handleSendForm","handleNextPage","evt","newInput","handleSubmit","showElement","photoFromPixabay","domRect","error","element"],"mappings":"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"}