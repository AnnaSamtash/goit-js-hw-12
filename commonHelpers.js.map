{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport { inputSearch, showElement, page, limit, preloader } from '../main';\nimport axios from \"axios\";\n\nexport async function fetchPhotoFromPixabay() {\n    const inputValueForForm = inputSearch.value.trim().split(',').join('+');\n    const searchParams = new URLSearchParams({\n        key: \"42633759-4a44573e34755b4488adb4c1b\",\n        q: [inputValueForForm],\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: [page], \n        per_page: [limit]\n    });\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    showElement(preloader);\n        return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { listOfPhotos, lightbox } from '../main';\n\n\nexport function renderPhotos(arr) { \n    if (arr.length == 0) {\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    } else {\n            \n        const markup = arr.map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => {\n            return `<li class=\"photos-list-item\">\n            <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n            <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n            </a>\n            <ul class=\"photo-information-container\">\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n            </ul>\n            </li>`;\n        })\n            .join(\"\");\n        listOfPhotos.insertAdjacentHTML(\"beforeend\", markup);\n        \n        lightbox.refresh();\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchPhotoFromPixabay } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\n\n\nconst form = document.querySelector('.search-form');\nexport const inputSearch = form.elements.search;\nconst nextPageBtn = document.querySelector('.next-page-btn');\nhideElement(nextPageBtn);\nexport const listOfPhotos = document.querySelector('.gallery');\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\nexport const preloader = document.querySelector('.loader');\nhideElement(preloader);\nexport let page = 1;\nexport let limit = 15;\nlet totalPages = Number;\nlet input = '';\nform.addEventListener('submit', handleSendForm);\nnextPageBtn.addEventListener('click', handleNextPage)\nasync function handleSendForm(evt) {\n    evt.preventDefault();\n    listOfPhotos.innerHTML = \"\";\n    const newInput = evt.target.elements.search.value.trim();\n    if (newInput === '') {\n        return iziToast.show({\n            message: 'Please complete the field!',\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    } else if (newInput !== input) {\n        page = 1;\n        input = newInput;\n    } else {\n        page += 1\n    }\n    try {\n        const photoFromPixabay = await fetchPhotoFromPixabay();\n        renderPhotos(photoFromPixabay.hits);\n        totalPages = Math.ceil(photoFromPixabay.totalHits / limit);\n        showElement(nextPageBtn);\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            message: 'Sorry, an error occurred while loading. Please try again!',\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    } finally {\n        hideElement(preloader);\n        handleLoad();\n        form.reset();\n    }\n}\nwindow.onload = handleLoad;\nasync function handleNextPage() {\n    if (page > totalPages) {\n        return iziToast.error({\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: \"topRight\",\n            message: \"We're sorry, there are no more posts to load\"\n        });\n    }\n    await handleSendForm();\n}\n\nexport function showElement(element){\n    element.classList.toggle('hidden');\n    element.style.display = 'flex';\n};\nfunction hideElement(element) {\n    element.classList.toggle('hidden');\n    element.style.display = 'none';\n};\n\nfunction handleLoad() {\n    document.body.classList.add('loaded');\n    document.body.classList.remove('loaded_hiding');\n};\n\n\n\n"],"names":["fetchPhotoFromPixabay","inputValueForForm","inputSearch","searchParams","page","limit","response","axios","showElement","preloader","renderPhotos","arr","iziToast","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","listOfPhotos","lightbox","form","nextPageBtn","hideElement","SimpleLightbox","totalPages","input","handleSendForm","handleNextPage","evt","newInput","photoFromPixabay","error","handleLoad","element"],"mappings":"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"}